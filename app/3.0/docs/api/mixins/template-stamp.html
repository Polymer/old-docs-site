{% set markdown = "true" %}
{% set title = "template-stamp Module" %}
{% extends "templates/base-devguide.html" %}
{% block title %}template-stamp â€“ API Reference{% endblock %}
{% block content %}
<iron-doc-module
    base-href="/3.0/docs/api"
    module-specifier="@polymer/polymer/lib/mixins/template-stamp.js"
    descriptor="{&quot;schema_version&quot;:&quot;1.0&quot;,&quot;mixins&quot;:[{&quot;description&quot;:&quot;Element mixin that provides basic template parsing and stamping, including\nthe following template-related features for stamped templates:\n\n- Declarative event listeners (`on-eventname=\&quot;listener\&quot;`)\n- Map of node id&apos;s to stamped node instances (`this.$.id`)\n- Nested template content caching/removal and re-installation (performance\n  optimization)&quot;,&quot;summary&quot;:&quot;Element class mixin that provides basic template parsing and stamping&quot;,&quot;path&quot;:&quot;lib/mixins/template-stamp.js&quot;,&quot;properties&quot;:[],&quot;methods&quot;:[{&quot;name&quot;:&quot;_stampTemplate&quot;,&quot;description&quot;:&quot;Clones the provided template content and returns a document fragment\ncontaining the cloned dom.\n\nThe template is parsed (once and memoized) using this library&apos;s\ntemplate parsing features, and provides the following value-added\nfeatures:\n* Adds declarative event listeners for `on-event=\&quot;handler\&quot;` attributes\n* Generates an \&quot;id map\&quot; for all nodes with id&apos;s under `$` on returned\n  document fragment\n* Passes template info including `content` back to templates as\n  `_templateInfo` (a performance optimization to avoid deep template\n  cloning)\n\nNote that the memoized template parsing process is destructive to the\ntemplate: attributes for bindings and declarative event listeners are\nremoved after being noted in notes, and any nested `&lt;template>.content`\nis removed and stored in notes as well.&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:409,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:431,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;template&quot;,&quot;type&quot;:&quot;!HTMLTemplateElement&quot;,&quot;description&quot;:&quot;Template to stamp&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;!StampedTemplate&quot;,&quot;desc&quot;:&quot;Cloned template content&quot;}},{&quot;name&quot;:&quot;_addMethodEventListenerToNode&quot;,&quot;description&quot;:&quot;Adds an event listener by method name for the event provided.\n\nThis method generates a handler function that looks up the method\nname at handling time.&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:446,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:451,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;node&quot;,&quot;type&quot;:&quot;!Node&quot;,&quot;description&quot;:&quot;Node to add listener on&quot;},{&quot;name&quot;:&quot;eventName&quot;,&quot;type&quot;:&quot;string&quot;,&quot;description&quot;:&quot;Name of event&quot;},{&quot;name&quot;:&quot;methodName&quot;,&quot;type&quot;:&quot;string&quot;,&quot;description&quot;:&quot;Name of method&quot;},{&quot;name&quot;:&quot;context&quot;,&quot;type&quot;:&quot;*=&quot;,&quot;description&quot;:&quot;Context the method will be called on (defaults\n  to `node`)&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;Function&quot;,&quot;desc&quot;:&quot;Generated handler function&quot;}},{&quot;name&quot;:&quot;_addEventListenerToNode&quot;,&quot;description&quot;:&quot;Override point for adding custom or simulated event handling.&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:461,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:463,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;node&quot;,&quot;type&quot;:&quot;!Node&quot;,&quot;description&quot;:&quot;Node to add event listener to&quot;},{&quot;name&quot;:&quot;eventName&quot;,&quot;type&quot;:&quot;string&quot;,&quot;description&quot;:&quot;Name of event&quot;},{&quot;name&quot;:&quot;handler&quot;,&quot;type&quot;:&quot;function (!Event): void&quot;,&quot;description&quot;:&quot;Listener function to add&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;void&quot;}},{&quot;name&quot;:&quot;_removeEventListenerFromNode&quot;,&quot;description&quot;:&quot;Override point for adding custom or simulated event handling.&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:473,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:475,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;node&quot;,&quot;type&quot;:&quot;Node&quot;,&quot;description&quot;:&quot;Node to remove event listener from&quot;},{&quot;name&quot;:&quot;eventName&quot;,&quot;type&quot;:&quot;string&quot;,&quot;description&quot;:&quot;Name of event&quot;},{&quot;name&quot;:&quot;handler&quot;,&quot;type&quot;:&quot;function (!Event): void&quot;,&quot;description&quot;:&quot;Listener function to remove&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;void&quot;}}],&quot;staticMethods&quot;:[{&quot;name&quot;:&quot;_parseTemplate&quot;,&quot;description&quot;:&quot;Scans a template to produce template metadata.\n\nTemplate-specific metadata are stored in the object returned, and node-\nspecific metadata are stored in objects in its flattened `nodeInfoList`\narray.  Only nodes in the template that were parsed as nodes of\ninterest contain an object in `nodeInfoList`.  Each `nodeInfo` object\ncontains an `index` (`childNodes` index in parent) and optionally\n`parent`, which points to node info of its parent (including its index).\n\nThe template metadata object returned from this method has the following\nstructure (many fields optional):\n\n```js\n  {\n    // Flattened list of node metadata (for nodes that generated metadata)\n    nodeInfoList: [\n      {\n        // `id` attribute for any nodes with id&apos;s for generating `$` map\n        id: {string},\n        // `on-event=\&quot;handler\&quot;` metadata\n        events: [\n          {\n            name: {string},   // event name\n            value: {string},  // handler method name\n          }, ...\n        ],\n        // Notes when the template contained a `&lt;slot>` for shady DOM\n        // optimization purposes\n        hasInsertionPoint: {boolean},\n        // For nested `&lt;template>`` nodes, nested template metadata\n        templateInfo: {object}, // nested template metadata\n        // Metadata to allow efficient retrieval of instanced node\n        // corresponding to this metadata\n        parentInfo: {number},   // reference to parent nodeInfo>\n        parentIndex: {number},  // index in parent&apos;s `childNodes` collection\n        infoIndex: {number},    // index of this `nodeInfo` in `templateInfo.nodeInfoList`\n      },\n      ...\n    ],\n    // When true, the template had the `strip-whitespace` attribute\n    // or was nested in a template with that setting\n    stripWhitespace: {boolean},\n    // For nested templates, nested template content is moved into\n    // a document fragment stored here; this is an optimization to\n    // avoid the cost of nested template cloning\n    content: {DocumentFragment}\n  }\n```\n\nThis method kicks off a recursive treewalk as follows:\n\n```\n   _parseTemplate &lt;---------------------+\n     _parseTemplateContent              |\n       _parseTemplateNode  &lt;------------|--+\n         _parseTemplateNestedTemplate --+  |\n         _parseTemplateChildNodes ---------+\n         _parseTemplateNodeAttributes\n           _parseTemplateNodeAttribute\n\n```\n\nThese methods may be overridden to add custom metadata about templates\nto either `templateInfo` or `nodeInfo`.\n\nNote that this method may be destructive to the template, in that\ne.g. event annotations may be removed after being noted in the\ntemplate metadata.&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:191,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:202,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;template&quot;,&quot;type&quot;:&quot;!HTMLTemplateElement&quot;,&quot;description&quot;:&quot;Template to parse&quot;},{&quot;name&quot;:&quot;outerTemplateInfo&quot;,&quot;type&quot;:&quot;TemplateInfo=&quot;,&quot;description&quot;:&quot;Template metadata from the outer\n  template, for parsing nested templates&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;!TemplateInfo&quot;,&quot;desc&quot;:&quot;Parsed template metadata&quot;}},{&quot;name&quot;:&quot;_parseTemplateContent&quot;,&quot;description&quot;:&quot;&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:204,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:206,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;template&quot;},{&quot;name&quot;:&quot;templateInfo&quot;},{&quot;name&quot;:&quot;nodeInfo&quot;}]},{&quot;name&quot;:&quot;_parseTemplateNode&quot;,&quot;description&quot;:&quot;Parses template node and adds template and node metadata based on\nthe current node, and its `childNodes` and `attributes`.\n\nThis method may be overridden to add custom node or template specific\nmetadata based on this node.&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:221,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:237,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;node&quot;,&quot;type&quot;:&quot;Node&quot;,&quot;description&quot;:&quot;Node to parse&quot;},{&quot;name&quot;:&quot;templateInfo&quot;,&quot;type&quot;:&quot;!TemplateInfo&quot;,&quot;description&quot;:&quot;Template metadata for current template&quot;},{&quot;name&quot;:&quot;nodeInfo&quot;,&quot;type&quot;:&quot;!NodeInfo&quot;,&quot;description&quot;:&quot;Node metadata for current template.&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;desc&quot;:&quot;`true` if the visited node added node-specific\n  metadata to `nodeInfo`&quot;}},{&quot;name&quot;:&quot;_parseTemplateChildNodes&quot;,&quot;description&quot;:&quot;Parses template child nodes for the given root node.\n\nThis method also wraps whitelisted legacy template extensions\n(`is=\&quot;dom-if\&quot;` and `is=\&quot;dom-repeat\&quot;`) with their equivalent element\nwrappers, collapses text nodes, and strips whitespace from the template\nif the `templateInfo.stripWhitespace` setting was provided.&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:252,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:289,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;root&quot;,&quot;type&quot;:&quot;Node&quot;,&quot;description&quot;:&quot;Root node whose `childNodes` will be parsed&quot;},{&quot;name&quot;:&quot;templateInfo&quot;,&quot;type&quot;:&quot;!TemplateInfo&quot;,&quot;description&quot;:&quot;Template metadata for current template&quot;},{&quot;name&quot;:&quot;nodeInfo&quot;,&quot;type&quot;:&quot;!NodeInfo&quot;,&quot;description&quot;:&quot;Node metadata for current template.&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;void&quot;}},{&quot;name&quot;:&quot;_parseTemplateNestedTemplate&quot;,&quot;description&quot;:&quot;Parses template content for the given nested `&lt;template>`.\n\nNested template info is stored as `templateInfo` in the current node&apos;s\n`nodeInfo`. `template.content` is removed and stored in `templateInfo`.\nIt will then be the responsibility of the host to set it back to the\ntemplate and for users stamping nested templates to use the\n`_contentForTemplate` method to retrieve the content for this template\n(an optimization to avoid the cost of cloning nested template content).&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:308,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:315,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;node&quot;,&quot;type&quot;:&quot;HTMLTemplateElement&quot;,&quot;description&quot;:&quot;Node to parse (a &lt;template>)&quot;},{&quot;name&quot;:&quot;outerTemplateInfo&quot;,&quot;type&quot;:&quot;TemplateInfo&quot;,&quot;description&quot;:&quot;Template metadata for current template\n  that includes the template `node`&quot;},{&quot;name&quot;:&quot;nodeInfo&quot;,&quot;type&quot;:&quot;!NodeInfo&quot;,&quot;description&quot;:&quot;Node metadata for current template.&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;desc&quot;:&quot;`true` if the visited node added node-specific\n  metadata to `nodeInfo`&quot;}},{&quot;name&quot;:&quot;_parseTemplateNodeAttributes&quot;,&quot;description&quot;:&quot;Parses template node attributes and adds node metadata to `nodeInfo`\nfor nodes of interest.&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:327,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:336,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;node&quot;,&quot;type&quot;:&quot;Element&quot;,&quot;description&quot;:&quot;Node to parse&quot;},{&quot;name&quot;:&quot;templateInfo&quot;,&quot;type&quot;:&quot;TemplateInfo&quot;,&quot;description&quot;:&quot;Template metadata for current template&quot;},{&quot;name&quot;:&quot;nodeInfo&quot;,&quot;type&quot;:&quot;NodeInfo&quot;,&quot;description&quot;:&quot;Node metadata for current template.&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;desc&quot;:&quot;`true` if the visited node added node-specific\n  metadata to `nodeInfo`&quot;}},{&quot;name&quot;:&quot;_parseTemplateNodeAttribute&quot;,&quot;description&quot;:&quot;Parses a single template node attribute and adds node metadata to\n`nodeInfo` for attributes of interest.\n\nThis implementation adds metadata for `on-event=\&quot;handler\&quot;` attributes\nand `id` attributes.&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:353,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:370,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;node&quot;,&quot;type&quot;:&quot;Element&quot;,&quot;description&quot;:&quot;Node to parse&quot;},{&quot;name&quot;:&quot;templateInfo&quot;,&quot;type&quot;:&quot;!TemplateInfo&quot;,&quot;description&quot;:&quot;Template metadata for current template&quot;},{&quot;name&quot;:&quot;nodeInfo&quot;,&quot;type&quot;:&quot;!NodeInfo&quot;,&quot;description&quot;:&quot;Node metadata for current template.&quot;},{&quot;name&quot;:&quot;name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;description&quot;:&quot;Attribute name&quot;},{&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;string&quot;,&quot;description&quot;:&quot;Attribute value&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;boolean&quot;,&quot;desc&quot;:&quot;`true` if the visited node added node-specific\n  metadata to `nodeInfo`&quot;}},{&quot;name&quot;:&quot;_contentForTemplate&quot;,&quot;description&quot;:&quot;Returns the `content` document fragment for a given template.\n\nFor nested templates, Polymer performs an optimization to cache nested\ntemplate content to avoid the cost of cloning deeply nested templates.\nThis method retrieves the cached content for a given template.&quot;,&quot;privacy&quot;:&quot;protected&quot;,&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:382,&quot;column&quot;:4},&quot;end&quot;:{&quot;line&quot;:385,&quot;column&quot;:5}},&quot;metadata&quot;:{},&quot;params&quot;:[{&quot;name&quot;:&quot;template&quot;,&quot;type&quot;:&quot;HTMLTemplateElement&quot;,&quot;description&quot;:&quot;Template to retrieve `content` for&quot;}],&quot;return&quot;:{&quot;type&quot;:&quot;DocumentFragment&quot;,&quot;desc&quot;:&quot;Content fragment&quot;}}],&quot;demos&quot;:[],&quot;metadata&quot;:{},&quot;sourceRange&quot;:{&quot;start&quot;:{&quot;line&quot;:107,&quot;column&quot;:7},&quot;end&quot;:{&quot;line&quot;:481,&quot;column&quot;:3}},&quot;privacy&quot;:&quot;public&quot;,&quot;name&quot;:&quot;TemplateStamp&quot;,&quot;attributes&quot;:[],&quot;events&quot;:[],&quot;styling&quot;:{&quot;cssVariables&quot;:[],&quot;selectors&quot;:[]},&quot;slots&quot;:[]}]}"></iron-doc-module>
{% endblock %}
