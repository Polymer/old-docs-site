<base href="//polygit2.appspot.com/components/">
<link rel="import" href="polymer/polymer.html">
<script src="webcomponentsjs/webcomponents-lite.min.js"></script>
<link rel="import" href="iron-demo-helpers/demo-snippet.html">
<link rel="import" href="paper-input/paper-input.html">
<link rel="import" href="app-route/app-route.html">
<link rel="import" href="iron-demo-helpers/demo-pages-shared-styles.html">
<style is="custom-style" include="demo-pages-shared-styles">
  demo-snippet {
    margin-bottom: 0;
  }
</style>

<demo-snippet>
  <template>
    <demo-1></demo-1>
    <dom-module id="demo-1">
      <template>

        <app-route route="{{route}}" pattern="{{pattern}}" active="{{active}}">
        </app-route>

        <div>Route is <span hidden$="{{active}}">not</span> active.</div>
        <paper-input label="Route path" value="{{route.path}}"></paper-input>
        <paper-input label="Match pattern" value="{{pattern}}"></paper-input>

      </template>
      <script>
        Polymer({
          is: 'demo-1',
          properties: {
            pattern: {
              value: '/store',
            },
            route: {
              value: function() {
                // Route objects are composed of the `path` that we want to
                // match on, the `prefix`, which is everything that has already
                // been matched by someone else before it got to us, and
                // an __queryParams object, which represents the ?key=value part
                // of the URL.
                // __queryParams is preceded by underscores because unless you're
                // doing the power-user thing of generating your own route objects,
                // you want to access query params directly from the <app-route>
                // element.
                return {path: '/store/garden', prefix: '', __queryParams: {}}
              }
            }
          }
        });
      </script>
    </dom-module>
  </template>
</demo-snippet>

<script>
  // Polygit rewrites the base, so we need to do some digging to get to the script.
  var parts = window.location.pathname.split('/');
  var url = parts.slice(0, parts.length-1).join('/') + '/resizer.js'
  var script = document.createElement('script');
  script.src = url;
  document.body.appendChild(script);
</script>
